'use strict';

var pathToRegexp = require('path-to-regexp');
var parseUrl = require('url-parse');
var debug = require('debug')('do:Route');
var ware = require('ware');
var util = require('util');


function Route(pattern, handlers) {
  ware.call(this);
  this.pattern = (pattern === '*') ? '(.*)' : pattern;
  this.keys = [];
  this.regexp = pathToRegexp(this.pattern, this.keys);
  this.use(handlers);
}

util.inherits(Route, ware);

Route.prototype.match = function(url) {
  var _url = parseUrl(url, true);
  var pathname = _url.pathname;

  return this.regexp.exec(pathname);
};

module.exports = Route;